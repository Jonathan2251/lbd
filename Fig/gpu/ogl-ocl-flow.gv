digraph OpenCL_OpenGL_Compilation {
    rankdir=LR;
    node [shape=box];

    // Source Languages
    OpenCL_C [style=filled, fillcolor=lightyellow];
    GLSL [style=filled, fillcolor=lightyellow];

    // Shared IRs
    SPIR [style=filled, fillcolor=lightyellow];
    SPIRV [label="SPIR-V IR", style=filled, fillcolor=lightyellow];
    LLVM_IR [style=filled, fillcolor=lightyellow];

    // Vendor Drivers
    node [shape=oval];
    "NVIDIA Driver" [style=filled, fillcolor=lightgreen];
    "AMD Driver" [style=filled, fillcolor=lightgreen];
    "ARM Driver" [style=filled, fillcolor=lightgreen];
    "Imagination Driver" [style=filled, fillcolor=lightgreen];
    "Apple Driver" [style=filled, fillcolor=lightgreen];

    // Private IRs
    node [shape=box];
    "PTX IR" [style=filled, fillcolor=gray];
    "GCN IR" [style=filled, fillcolor=gray];
    "Burst IR" [style=filled, fillcolor=gray];
    "Metal IR" [style=filled, fillcolor=gray];

    // GPU Targets
    "NVIDIA GPU ISA" [style=filled, fillcolor=lightblue];
    "AMD GPU ISA" [style=filled, fillcolor=lightblue];
    "ARM Mali ISA" [style=filled, fillcolor=lightblue];
    "Imagination USC ISA" [style=filled, fillcolor=lightblue];
    "Apple GPU ISA" [style=filled, fillcolor=lightblue];

    // OpenCL Flow
    OpenCL_C -> SPIR -> LLVM_IR;
    OpenCL_C -> SPIRV;

    // OpenGL Flow
    GLSL -> SPIRV -> LLVM_IR;

    // LLVM based Compilation Flow
    LLVM_IR -> "PTX IR" -> "NVIDIA Driver" -> "NVIDIA GPU ISA";
    LLVM_IR -> "GCN IR" -> "AMD Driver" -> "AMD GPU ISA";
    LLVM_IR -> "ARM Driver" -> "ARM Mali ISA";
    LLVM_IR -> "Burst IR" -> "Imagination Driver" -> "Imagination USC ISA";
    LLVM_IR -> "Metal IR" -> "Apple Driver" -> "Apple GPU ISA";
}
