
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Appendix A: Getting Started: Installing LLVM and the Cpu0 example code &#8212; Tutorial: Creating an LLVM Backend for the Cpu0 Architecture</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Appendix B: Cpu0 document and test" href="doc.html" />
    <link rel="prev" title="Verify backend on Verilog simulator" href="verilog.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Tutorial: Creating an LLVM Backend for the Cpu0 Architecture</span></a></h1>
        <h2 class="heading"><span>Appendix A: Getting Started: Installing LLVM and the Cpu0 example code</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="verilog.html">Verify backend on Verilog simulator</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="doc.html">Appendix B: Cpu0 document and test</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="appendix-a-getting-started-installing-llvm-and-the-cpu0-example-code">
<span id="sec-appendix-installing"></span><h1>Appendix A: Getting Started: Installing LLVM and the Cpu0 example code<a class="headerlink" href="#appendix-a-getting-started-installing-llvm-and-the-cpu0-example-code" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#build-steps" id="id8">Build steps</a></p></li>
<li><p><a class="reference internal" href="#setting-up-your-mac" id="id9">Setting Up Your Mac</a></p>
<ul>
<li><p><a class="reference internal" href="#install-icarus-verilog-tool-on-imac" id="id10">Install Icarus Verilog tool on iMac</a></p></li>
<li><p><a class="reference internal" href="#install-other-tools-on-imac" id="id11">Install other tools on iMac</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#setting-up-your-linux-machine" id="id12">Setting Up Your Linux Machine</a></p>
<ul>
<li><p><a class="reference internal" href="#install-icarus-verilog-tool-on-linux" id="id13">Install Icarus Verilog tool on Linux</a></p></li>
<li><p><a class="reference internal" href="#install-other-tools-on-linux" id="id14">Install other tools on Linux</a></p></li>
</ul>
</li>
</ul>
</div>
<p>Cpu0 example code, lbdex, can be found near left bottom of this web site. Or
here <a class="reference external" href="http://jonathan2251.github.io/lbd/lbdex.tar.gz">http://jonathan2251.github.io/lbd/lbdex.tar.gz</a>.</p>
<p>For information in using <code class="docutils literal notranslate"><span class="pre">cmake</span></code> to build LLVM, please refer to the “Building
LLVM with CMake” <a class="footnote-reference brackets" href="#llvm-cmake" id="id1">1</a> documentation for further information.</p>
<p>We install two llvm directories in this chapter. One is the directory
~/llvm/release/ which contains the clang and clang++ compiler we will use to
translate the C/C++ input file into llvm IR.
The other is the directory ~/llvm/test/ which contains our cpu0 backend
program and clang.</p>
<section id="build-steps">
<h2><a class="toc-backref" href="#id8">Build steps</a><a class="headerlink" href="#build-steps" title="Permalink to this headline">¶</a></h2>
<p>After setup brew install for iMac or install necessory packages. Build as
<a class="reference external" href="https://github.com/Jonathan2251/lbd/blob/master/README.md">https://github.com/Jonathan2251/lbd/blob/master/README.md</a>.</p>
</section>
<section id="setting-up-your-mac">
<h2><a class="toc-backref" href="#id9">Setting Up Your Mac</a><a class="headerlink" href="#setting-up-your-mac" title="Permalink to this headline">¶</a></h2>
<p>Brew install and setup first <a class="footnote-reference brackets" href="#installbrew" id="id2">2</a>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>/bin/bash -c <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="k">)</span><span class="s2">&quot;</span>
<span class="go">[#installbrew]_.</span>
</pre></div>
</div>
<p>Then add brew command to your path as the bottom of installed message of bash above, like the
following.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span><span class="nb">echo</span> <span class="s1">&#39;eval &quot;$(/opt/homebrew/bin/brew shellenv)&quot;&#39;</span> &gt;&gt; /Users/cschen/.zprofile
<span class="gp">% </span><span class="nb">eval</span> <span class="s2">&quot;</span><span class="k">$(</span>/opt/homebrew/bin/brew shellenv<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
<section id="install-icarus-verilog-tool-on-imac">
<h3><a class="toc-backref" href="#id10">Install Icarus Verilog tool on iMac</a><a class="headerlink" href="#install-icarus-verilog-tool-on-imac" title="Permalink to this headline">¶</a></h3>
<p>Install Icarus Verilog tool by command <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">icarus-verilog</span></code> as follows,</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>brew install icarus-verilog
<span class="go">==&gt; Downloading ftp://icarus.com/pub/eda/verilog/v0.9/verilog-0.9.5.tar.gz</span>
<span class="gp">#</span><span class="c1">####################################################################### 100.0%</span>
<span class="gp">#</span><span class="c1">####################################################################### 100.0%</span>
<span class="go">==&gt; ./configure --prefix=/usr/local/Cellar/icarus-verilog/0.9.5</span>
<span class="go">==&gt; make</span>
<span class="go">==&gt; make installdirs</span>
<span class="go">==&gt; make install</span>
<span class="go">/usr/local/Cellar/icarus-verilog/0.9.5: 39 files, 12M, built in 55 seconds</span>
</pre></div>
</div>
</section>
<section id="install-other-tools-on-imac">
<h3><a class="toc-backref" href="#id11">Install other tools on iMac</a><a class="headerlink" href="#install-other-tools-on-imac" title="Permalink to this headline">¶</a></h3>
<p>Install Graphviz for display llvm IR nodes in debugging,
<a class="footnote-reference brackets" href="#graphviz-dm" id="id3">4</a>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>brew install graphviz
</pre></div>
</div>
<p>The Graphviz information for llvm is at section “SelectionDAG Instruction
Selection Process” ” of “The LLVM Target-Independent Code Generator” here
<a class="footnote-reference brackets" href="#isp" id="id4">5</a>  and at section “Viewing graphs while debugging code” of “LLVM
Programmer’s Manual” here <a class="footnote-reference brackets" href="#vgwdc" id="id5">6</a>.</p>
<p>Install binutils by command <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">binutils</span></code> as follows,</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">// get brew by the following ruby command if you don&#39;t have installed brew</span>
<span class="gp">118-165-77-214:~ Jonathan$ </span>ruby -e <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&quot;</span> &lt; /dev/null <span class="m">2</span>&gt; /dev/null
<span class="gp">118-165-77-214:~ Jonathan$ </span>brew install binutils
<span class="go">==&gt; Downloading http://ftpmirror.gnu.org/binutils/binutils-2.22.tar.gz</span>
<span class="gp">#</span><span class="c1">####################################################################### 100.0%</span>
<span class="go">==&gt; ./configure --program-prefix=g --prefix=/usr/local/Cellar/binutils/2.22</span>
<span class="go">--infodir=/usr/loca</span>
<span class="go">==&gt; make</span>
<span class="go">==&gt; make install</span>
<span class="go">/usr/local/Cellar/binutils/2.22: 90 files, 19M, built in 4.7 minutes</span>
<span class="gp">118-165-77-214:~ Jonathan$ </span>ls /usr/local/Cellar/binutils/2.22
<span class="go">COPYING     README      lib</span>
<span class="go">ChangeLog     bin       share</span>
<span class="go">INSTALL_RECEIPT.json    include       x86_64-apple-darwin12.2.0</span>
<span class="gp">118-165-77-214:binutils-2.23 Jonathan$ </span>ls /usr/local/Cellar/binutils/2.22/bin
<span class="go">gaddr2line  gc++filt  gnm   gobjdump  greadelf  gstrings</span>
<span class="go">gar   gelfedit  gobjcopy  granlib gsize   gstrip</span>
</pre></div>
</div>
</section>
</section>
<section id="setting-up-your-linux-machine">
<h2><a class="toc-backref" href="#id12">Setting Up Your Linux Machine</a><a class="headerlink" href="#setting-up-your-linux-machine" title="Permalink to this headline">¶</a></h2>
<section id="install-icarus-verilog-tool-on-linux">
<h3><a class="toc-backref" href="#id13">Install Icarus Verilog tool on Linux</a><a class="headerlink" href="#install-icarus-verilog-tool-on-linux" title="Permalink to this headline">¶</a></h3>
<p>Download the snapshot version of Icarus Verilog tool from web site,
<a class="reference external" href="ftp://icarus.com/pub/eda/verilog/snapshots">ftp://icarus.com/pub/eda/verilog/snapshots</a> or go to <a class="reference external" href="http://iverilog.icarus.com/">http://iverilog.icarus.com/</a>
and click snapshot version link. Follow the INSTALL file guide to install it.</p>
</section>
<section id="install-other-tools-on-linux">
<h3><a class="toc-backref" href="#id14">Install other tools on Linux</a><a class="headerlink" href="#install-other-tools-on-linux" title="Permalink to this headline">¶</a></h3>
<p>Download Graphviz from <a class="footnote-reference brackets" href="#graphviz-download" id="id6">7</a> according your
Linux distribution. Files compare tools Kdiff3 came from web site <a class="footnote-reference brackets" href="#kdiff3" id="id7">3</a>.</p>
<p>Set /home/Gamma/.bash_profile as follows,</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[Gamma@localhost ~]$ </span><span class="nb">pwd</span>
<span class="go">/home/Gamma</span>
<span class="gp">[Gamma@localhost ~]$ </span>cat .bash_profile
<span class="gp"># </span>.bash_profile

<span class="gp"># </span>Get the aliases and functions
<span class="go">if [ -f ~/.bashrc ]; then</span>
<span class="go">  . ~/.bashrc</span>
<span class="go">fi</span>

<span class="gp"># </span>User specific environment and startup programs

<span class="go">PATH=$PATH:/usr/local/sphinx/bin:~/llvm/release/build/bin:</span>
<span class="go">...</span>
<span class="go">export PATH</span>
<span class="gp">[Gamma@localhost ~]$ </span><span class="nb">source</span> .bash_profile
<span class="gp">[Gamma@localhost ~]$ </span><span class="nv">$PATH</span>
<span class="go">bash: /usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:</span>
<span class="go">/usr/sbin:/usr/local/sphinx/bin:/home/Gamma/.local/bin:/home/Gamma/bin:</span>
<span class="go">/usr/local/sphinx/bin:/home/cschen/llvm/release/build/bin</span>
</pre></div>
</div>
<dl class="footnote brackets">
<dt class="label" id="llvm-cmake"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="http://llvm.org/docs/CMake.html?highlight=cmake">http://llvm.org/docs/CMake.html?highlight=cmake</a></p>
</dd>
<dt class="label" id="installbrew"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p><a class="reference external" href="https://brew.sh/">https://brew.sh/</a></p>
</dd>
<dt class="label" id="kdiff3"><span class="brackets"><a class="fn-backref" href="#id7">3</a></span></dt>
<dd><p><a class="reference external" href="http://kdiff3.sourceforge.net">http://kdiff3.sourceforge.net</a></p>
</dd>
<dt class="label" id="graphviz-dm"><span class="brackets"><a class="fn-backref" href="#id3">4</a></span></dt>
<dd><p><a class="reference external" href="https://graphviz.org/download/">https://graphviz.org/download/</a></p>
</dd>
<dt class="label" id="isp"><span class="brackets"><a class="fn-backref" href="#id4">5</a></span></dt>
<dd><p><a class="reference external" href="http://llvm.org/docs/CodeGenerator.html#selectiondag-instruction-selection-process">http://llvm.org/docs/CodeGenerator.html#selectiondag-instruction-selection-process</a></p>
</dd>
<dt class="label" id="vgwdc"><span class="brackets"><a class="fn-backref" href="#id5">6</a></span></dt>
<dd><p><a class="reference external" href="http://llvm.org/docs/ProgrammersManual.html#viewing-graphs-while-debugging-code">http://llvm.org/docs/ProgrammersManual.html#viewing-graphs-while-debugging-code</a></p>
</dd>
<dt class="label" id="graphviz-download"><span class="brackets"><a class="fn-backref" href="#id6">7</a></span></dt>
<dd><p><a class="reference external" href="http://www.graphviz.org/Download.php">http://www.graphviz.org/Download.php</a></p>
</dd>
</dl>
</section>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="verilog.html">Verify backend on Verilog simulator</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="doc.html">Appendix B: Cpu0 document and test</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Chen Chung-Shu.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.1.
    </div>
  </body>
</html>